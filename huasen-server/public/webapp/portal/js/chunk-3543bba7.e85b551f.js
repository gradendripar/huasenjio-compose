(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3543bba7"],{"156f":function(t,e,i){},4278:function(t,e,i){"use strict";i("156f")},"9bd2":function(t,e,i){"use strict";i.r(e);var a=i("2f62"),s=i("dabc"),l={name:"HomeSite",data:()=>({pinMap:{1:{label:"热",color:"var(--danger)"},2:{label:"墙",color:"var(--warning)"},3:{label:"优",color:"var(--success)"},4:{label:"免",color:"var(--primary)"}}}),computed:{...Object(a.e)(["appConfig","categorySites"]),categorySitesData(){let t=this.LODASH.cloneDeep(this.categorySites)||[];return t.forEach(t=>{t.selectedTag="",t.allTags=this.handleCategoryAllTag(t)}),t}},mounted(){this.$store.dispatch("initLocalThemeInfo")},methods:{showTag(t){return this.LODASH.get(this.appConfig,"site.openLabelClassification")&&0!==t.allTags.length},imgUrl:t=>t.icon,handleSelectTag(t,e){t.selectedTag=t.selectedTag===e?"":e,this.$forceUpdate()},handleDisplaySites:t=>t.selectedTag?t.sites.filter(e=>e.tags&&e.tags.includes(t.selectedTag)):t.sites,handleCategoryAllTag(t){let e=[];return(this.LODASH.get(t,"sites")||[]).forEach(t=>{let i=s.i.parseJSON(t.expand,"Object",{}),a=this.LODASH.get(i,"tag");Array.isArray(a)&&(t.tags=a,e=e.concat(a))}),e=Array.from(new Set(e)),e},handlePin(t){let e=[];try{e=JSON.parse(t.expand).pin.slice(0,6)}catch(t){e=[]}return e},goSite(t){window.open(t.url,"_blank")},async openDetail(t){const e=await this.API.Site.findSiteDetail({_id:t._id},{notify:!1});this.$emit("openDetail",e.data)}}},n=(i("4278"),i("2877")),r=Object(n.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"discolor",rawName:"v-discolor"}],staticClass:"home-site",attrs:{id:"js-home-site"}},t._l(t.categorySitesData,(function(e,a){return i("section",{key:e.typeId,attrs:{id:"site-anchor-"+encodeURI(a)}},[i("div",{directives:[{name:"discolor",rawName:"v-discolor"}],staticClass:"site-item"},[i("header",[i("i",{staticClass:"category-icon relative left-px-2 iconfont icon-tag"}),i("a",{staticClass:"category-title",attrs:{name:e.typeName}},[t._v(t._s(e.typeName))]),t.showTag(e)?i("div",{staticClass:"w-full pb-px-4 my-px-4 overflow-x-auto overflow-y-hidden"},[i("div",{staticClass:"inherit-bg tag-container flex items-center p-px-4 bg-gray-100 rounded-full"},[i("div",{staticClass:"inherit-bg flex-shrink-0 text-12px text text-center w-px-80 px-px-2 py-px-4 ml-px-6 first:ml-px-0 hover:bg-blue-400 hover:text-white transition rounded-full pointer",class:{selected:""===e.selectedTag},attrs:{title:"全部"},on:{click:function(i){return t.handleSelectTag(e,"")}}},[t._v(" 全部 ")]),t._l(e.allTags,(function(a){return i("div",{key:a,staticClass:"inherit-bg flex-shrink-0 text-12px text text-center w-px-80 px-px-2 py-px-4 ml-px-6 first:ml-px-0 hover:bg-blue-400 hover:text-white transition rounded-full pointer",class:{selected:e.selectedTag===a},attrs:{title:a},on:{click:function(i){return t.handleSelectTag(e,a)}}},[t._v(" "+t._s(a)+" ")])}))],2)]):t._e()]),i("main",[i("ul",{directives:[{name:"balance",rawName:"v-balance"}]},t._l(t.handleDisplaySites(e),(function(a){return i("div",{key:e.typeId+"-"+a._id,staticClass:"site relative inherit-text",on:{click:function(e){return t.openDetail(a)}}},[i("div",{staticClass:"pin-group absolute -top-px-6 right-px-0 w-full h-px-16 flex justify-end"},t._l(t.handlePin(a),(function(e,a){return i("div",{key:e+"-"+a,staticClass:"w-px-16 h-px-16 mr-px-2 text-12px text-gray-0 flex justify-center items-center rounded-full",style:{backgroundColor:t.LODASH.get(t.pinMap,e+".color")}},[t.LODASH.get(t.pinMap,e)?[t._v(" "+t._s(t.LODASH.get(t.pinMap,e+".label"))+" ")]:t._e()],2)})),0),i("div",{staticClass:"site-card inherit-text text w-px-180 sm:w-px-150"},[i("div",{staticClass:"img-group"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:{siteUrl:a.url,iconPatch:t.appConfig.site.autoIconPatch},expression:"{ siteUrl: site.url, iconPatch: appConfig.site.autoIconPatch }"}],key:e.typeId+"-"+a._id+"-"+a.url,attrs:{src:t.imgUrl(a)}}),i("div",{staticClass:"direct",attrs:{title:"直达站点"},on:{click:function(e){return e.stopPropagation(),t.goSite(a)}}},[i("i",{staticClass:"iconfont icon-xiangyou"})])]),i("div",{staticClass:"text-group"},[i("div",{staticClass:"name text",attrs:{title:a.name}},[t._v(t._s(a.name))]),i("div",{staticClass:"describe inherit-text text",attrs:{title:a.description}},[t._v(t._s(a.description))])])])])})),0)])])])})),0)}),[],!1,null,"53de66a8",null);e.default=r.exports}}]);
//# sourceMappingURL=chunk-3543bba7.e85b551f.js.map